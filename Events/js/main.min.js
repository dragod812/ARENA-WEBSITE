function loadViewport() {
    $("#viewport").css({
        visibility: "visible",
        opacity: "1"
    })
}

function loadSlide() {
    var e = $("#myCarousel .item.active").index(),
        t = $(".item.active").data("url"),
        i = $(".item.active").data("title"),
        a = $(".item.active").data("class"),
        r = $(".item.active").data("facebook");
    $("#content").html("wait..."), $("#content").load(t, function(t) {    //#content-box
        $("#myCarousel").carousel(e)
    }), $(".athlete-title").html(i, function(t) {
        $("#myCarousel").carousel(e)
    }), $("#title").html(i, function(t) {
        $("#myCarousel").carousel(e)
    }), $("#viewport").attr("class", "").addClass(a), $('meta[property="og:description"]').attr("content", r)
}

function loadMeta() {
    var e = $("#myCarousel .item.active").index(),
        t = $(".item.active").data("title"),
        t = $(".item.active").data("title"),
        i = $(".item.active").data("class");
    $(".item.active").data("facebook");
    $(".athlete-title").html(t, function(t) {
        $("#myCarousel").carousel(e)
    }), $("#title").html(t, function(t) {
        $("#myCarousel").carousel(e)
    }), $("#viewport").attr("class", "").addClass(i)
}

function windowPopup(e, t, i) {
    var a = screen.width / 2 - t / 2,
        r = screen.height / 2 - i / 2;
    window.open(e, "", "menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=" + t + ",height=" + i + ",top=" + r + ",left=" + a)
}! function(e) {
    "use strict";

    function t(e, t, i) {
        var a;
        return function() {
            var r = this,
                o = arguments,
                n = function() {
                    a = null, i || e.apply(r, o)
                },
                s = i && !a;
            clearTimeout(a), a = setTimeout(n, t), s && e.apply(r, o)
        }
    }

    function i(e, t) {
        for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]);
        return e
    }

    function a(e) {
        this.options = i({}, this.options), i(this.options, e), this._init()
    }
    var r = document.body,
        o = document.getElementById("viewport"),
        n = {
            width: e.innerWidth,
            height: e.innerHeight
        },
        s = {
            animations: Modernizr.cssanimations
        },
        l = {
            WebkitAnimation: "webkitAnimationEnd",
            OAnimation: "oAnimationEnd",
            msAnimation: "MSAnimationEnd",
            animation: "animationend"
        },
        c = l[Modernizr.prefixed("animation")],
        d = function(e, t) {
            var i = function(e) {
                if (s.animations) {
                    if (e.target != this) return;
                    this.removeEventListener(c, i)
                }
                t && "function" == typeof t && t.call()
            };
            s.animations ? e.addEventListener(c, i) : i()
        };
    a.prototype.options = {
        nmbLayers: 1,
        bgcolor: "#fff",
        effect: "anim--effect-1",
        onStart: function(e) {
            return !1
        },
        onEnd: function(e) {
            return !1
        }
    }, a.prototype._init = function() {
        this._addLayers(), this.layers = [].slice.call(this.revealerWrapper.children), this._initEvents()
    }, a.prototype._initEvents = function() {
        this.debounceResize = t(function(t) {
            n = {
                width: e.innerWidth,
                height: e.innerHeight
            }
        }, 10), e.addEventListener("resize", this.debounceResize)
    }, a.prototype._addLayers = function() {
        this.revealerWrapper = document.createElement("div"), this.revealerWrapper.className = "revealer", classie.add(r, this.options.effect);
        for (var e = "", t = 0; t < this.options.nmbLayers; ++t) {
            "string" == typeof this.options.bgcolor ? this.options.bgcolor : this.options.bgcolor instanceof Array && this.options.bgcolor[t] ? this.options.bgcolor[t] : "#fff";
            e += '<div class="revealer__layer"></div>'
        }
        this.revealerWrapper.innerHTML = e, o.appendChild(this.revealerWrapper)
    }, a.prototype.reveal = function(e, t, i) {
        if (this.isAnimating) return !1;
        this.isAnimating = !0, this.direction = e, this.options.onStart(this.direction);
        var a, r, o;
        if ("cornertopleft" === e || "cornertopright" === e || "cornerbottomleft" === e || "cornerbottomright" === e) {
            var s = Math.sqrt(Math.pow(n.width, 2) + Math.pow(n.height, 2));
            a = r = s + "px", "cornertopleft" === e ? o = "translate3d(-50%,-50%,0) rotate3d(0,0,1,135deg) translate3d(0," + s + "px,0)" : "cornertopright" === e ? o = "translate3d(-50%,-50%,0) rotate3d(0,0,1,-135deg) translate3d(0," + s + "px,0)" : "cornerbottomleft" === e ? o = "translate3d(-50%,-50%,0) rotate3d(0,0,1,45deg) translate3d(0," + s + "px,0)" : "cornerbottomright" === e && (o = "translate3d(-50%,-50%,0) rotate3d(0,0,1,-45deg) translate3d(0," + s + "px,0)")
        } else "left" === e || "right" === e ? (a = "100vh", r = "100vw", o = "translate3d(-50%,-50%,0) rotate3d(0,0,1," + ("left" === e ? 90 : -90) + "deg) translate3d(0,100%,0)") : "top" !== e && "bottom" !== e || (a = "100vw", r = "100vh", o = "top" === e ? "rotate3d(0,0,1,180deg)" : "none");
        this.revealerWrapper.style.width = a, this.revealerWrapper.style.height = r, this.revealerWrapper.style.WebkitTransform = this.revealerWrapper.style.transform = o, this.revealerWrapper.style.opacity = 1, classie.add(this.revealerWrapper, "revealer--" + e || "revealer--right"), classie.add(this.revealerWrapper, "revealer--animate");
        var l = this,
            c = 0;
        this.layers.forEach(function(t) {
            d(t, function() {
                ++c, c === l.options.nmbLayers && (classie.remove(l.revealerWrapper, "revealer--" + e || "revealer--right"), classie.remove(l.revealerWrapper, "revealer--animate"), l.revealerWrapper.style.opacity = 0, l.isAnimating = !1, l.options.onEnd(l.direction))
            })
        }), "function" == typeof i && (this.callbacktimeout && clearTimeout(this.callbacktimeout), this.callbacktimeout = setTimeout(i, t))
    }, a.prototype.destroy = function() {
        classie.remove(r, this.options.effect), e.removeEventListener("resize", this.debounceResize), r.removeChild(this.revealerWrapper)
    }, e.Revealer = a
}(window);
var $viewport = $("#viewport"),
    carousel = $("#myCarousel"),
    $carousel = $(".carousel"),
    $body = $("body"),
    $splash = $("#splash"),
    $articleTrigger = $(".open-article"),
    social = $(".item.active").data("facebook"),
    $activeItem = $(".active"),
    $content = $("#content"),
    $slideTitle = $(".athlete-title"),
    $navTitle = $("#title");
if (setTimeout(loadViewport, 300), carousel.carousel({
        interval: 5e3,
        pause: "false"
    }), window.location.hash) {
    $body.addClass("loaded"), $body.addClass("expanded"), $splash.hide(), $carousel.carousel("pause"), c = $("#myCarousel"), opt = c.data()["bs.carousel"].options, opt.interval = !1, c.data({
        options: opt
    }), $(".pages div:first-child").removeClass("page--current").next().addClass("page-current"), $(".pagenav").hide();
    var url = document.location.toString();
    url.match("#") && ($activeItem.removeClass("active"), $(".carousel-inner div:nth-child(" + url.split("#")[1] + ")").addClass("active")), carousel.bind("slid.bs.carousel", function(e) {
        window.location.hash = "#" + parseInt($activeItem.index() + 1)
    });
    var slideidx = $("#myCarousel .item.active").index(),
        slideurl = $(".item.active").data("url"),
        slidetitle = $(".item.active").data("title");
    $content.html("wait..."), $content.load(slideurl, function(e) {
        carousel.carousel(slideidx)
    }), $slideTitle.html(slidetitle, function(e) {
        carousel.carousel(slideidx)
    }), $navTitle.html(slidetitle, function(e) {
        carousel.carousel(slideidx)
    }), $('meta[property="og:description"]').attr("content", social)
} else $splash.show(), loadMeta();
$articleTrigger.on("click", function(e) {
    $body.hasClass("expanded") ? $body.removeClass("expanded") : ($body.addClass("expanded"), loadSlide())
}), //$("#start").click(function() {
    $(this).parent().hide(), $(".carousel").carousel("pause"), c = $("#myCarousel"), opt = c.data()["bs.carousel"].options, opt.interval = !1, c.data({
        options: opt
    }), setTimeout(function() {
        $body.addClass("loaded")
    }, 1e3)
/*})*/,carousel.on("slid.bs.carousel", function(e) {
    var t = $("#myCarousel .item.active").index(),
        i = $(".item.active").data("url"),
        a = $(".item.active").data("title"),
        r = $(".item.active").data("class"),
        o = $(".item.active").data("facebook");
    $("#content").html("wait..."), $("#content").load(i, function(e) {
        $("#myCarousel").carousel(t)
    }), $(".athlete-title").html(a, function(e) {
        $("#myCarousel").carousel(t)
    }), $("#title").html(a, function(e) {
        $("#myCarousel").carousel(t)
    }), $("#viewport").attr("class", "").addClass(r), $('meta[property="og:description"]').attr("content", o)
}), $(".lazy").recliner({
    attrib: "data-src",
    throttle: 300,
    threshold: 100,
    printable: !0,
    live: !0
}), $("#athlete-profile").scroll(function() {
    $(window).trigger("lazyupdate")
}), $(".prev").click(function(e) {
    e.preventDefault(), $("#myCarousel").carousel("prev")
}), $(".next").click(function(e) {
    e.preventDefault(), $("#myCarousel").carousel("next")
}), $(".carousel").swipe({
    swipe: function(e, t, i, a, r, o) {
        "left" == t && $(this).carousel("next"), "right" == t && $(this).carousel("prev")
    },
    allowPageScroll: "vertical"
});
var totalItems = $(".item").length,
    currentIndex = $("div.active").index() + 1;
$(".num").html("" + currentIndex + "/" + totalItems), $("#myCarousel").bind("slid.bs.carousel", function() {
    currentIndex = $("div.active").index() + 1, $(".num").html("" + currentIndex + "/" + totalItems)
}), $(".share").on("click", function(e) {
    e.preventDefault(), windowPopup($(this).attr("href"), 500, 300)
});

$(document).keydown(function(e) {
  if(e.keyCode == 37) {
    $('#myCarousel').carousel('prev');
  }
  if(e.keyCode == 39) {
    $('#myCarousel').carousel('next');
  }
});

$('[data-toggle="tooltip"]').tooltip();